# xc-sdk-android



## Developer  Guide

To make it easy for you to get started with crossclassify SDK, here's a development guide.

This library is made of three main parts

[Screen Navigation Tracking](https://github.com/crossclassify/xc-sdk-android/#1set-sdk-to-gradlee) \
[Form Metadata Tracking](https://github.com/crossclassify/xc-sdk-android/#2set-base-class) \
[Content Tracking](https://github.com/crossclassify/xc-sdk-android/#3set-screen-navigation-analysis)

### PageView Requests
#### Screen Navigation Tracking
All visits of the user from different pages of the App are tracked with the help of Matomo, as in the following example, the user performed three actions first, he was on the login page, then he went to the signup page, and then he returned to the login page.
More details [here](https://github.com/matomo-org/matomo-sdk-ios).


![image](https://user-images.githubusercontent.com/69571791/200755744-a04227ce-a1de-4471-823d-4d7118850545.png)

As soon as the user navigates to the new page, the page will track with the help of Matomo.

![image](https://user-images.githubusercontent.com/69571791/200756780-a243def9-bfb7-444c-a427-acb6eb1f4160.png)

### FormInteractions Requests
#### Form metadata tracking
When the user enters a form, if the form does not already exist in the database, it should be auto-generated with the following request.\
check [this](https://api.crossclassify.com/matomo/matomo.php?action_name=formAutoGenerate&idsite=137&rec=1&r=511664&h=13&m=45&s=30&date=2022-11-09T13:45:30+3:30&url=mobin-signup-form&_id=3b8a399f706078bc&_uid=jsi6cIVuJINg5gKaysqd&_idn=0&_refts=0&send_image=0&pdf=1&qt=0&realp=0&wma=0&fla=0&java=0&ag=0&cookie=1&res=2148x1080&fa_pv=1&fa_fp[0][fa_id]=mobin-signup-form&fa_fp[0][fa_fv]=1&pf_net=0&pf_srv=4&pf_tfr=2&pf_dm1=63&pv_id=IAl1DZ&fa_fp[0][fa_vid]=JUpoVl
) on postman.

After the form is autogenerated, its data must be collected and sent, for each form that is available in the App, a series of data must be sent as metadata, which includes two parts.
- Fields Metadata
- Form Metadata

##### Fields Metadata
For example, in the form below
We have two fields, email and password, and metadata will collect from both of them,which includes the following:
:warning: **metadata information will collect from all fields.**

![image](https://user-images.githubusercontent.com/69571791/200761854-1b43fc5e-7c6c-4219-bfc5-22a58e734f55.png)

##### fa_fts:
The time in milliseconds the user interacts with a field (including all interactions from the beginning to the time the data is sent).
##### fa_fht:
The time in milliseconds a visitor waited before interacting with the field.(for the first time)
##### fa_fb:
True if the field was left blank, False otherwise.
##### fa_fn:
The name of the form field as it was defined in the name attribute in XML.
##### fa_fch:
The number of times a visitor has changed this field., for example, if the user first entered the value of the username field as X and then Y, the number of changes should be considered 2.
##### fa_ff:
The number of times this field was focused.
##### fa_fd:
The number of times either a backspace or delete key was used when a field was changed.
##### fa_cu:
The number of times your visitors have used any of the cursor keys on this field.
##### fa_ft:
The type of field (text,radio or checkbox)
##### fa_fs:
The number of characters a text field answer had. For example if someone enters "user" then it would store 4.
##### fa_cn:
The content of a field in case the user enables form content tracking by setting a tag equal to IncludeContentTracking for the field.\


**These items are collected from all fields, which can be seen as fa_fields in the [submitted request](https://api.crossclassify.com/matomo/matomo.php?fa_vid=JUpoVl&fa_id=mobin-signup-form&fa_name=mobin-signup-form&fa_ef=username&fa_lf=confirmPassword&fa_fields=%5B%7B%22fa_fts%22%3A7371%2C%22fa_fht%22%3A1561%2C%22fa_fb%22%3Afalse%2C%22fa_fn%22%3A%22username%22%2C%22fa_fch%22%3A1%2C%22fa_ff%22%3A1%2C%22fa_fd%22%3A6%2C%22fa_fcu%22%3Anull%2C%22fa_ft%22%3A%22text%22%2C%22fa_fs%22%3A6%2C%22fa_cn%22%3A%22helena%22%7D%2C%7B%22fa_fts%22%3A12129%2C%22fa_fht%22%3A1077%2C%22fa_fb%22%3Afalse%2C%22fa_fn%22%3A%22email%22%2C%22fa_fch%22%3A1%2C%22fa_ff%22%3A1%2C%22fa_fd%22%3A0%2C%22fa_fcu%22%3Anull%2C%22fa_ft%22%3A%22text%22%2C%22fa_fs%22%3A21%2C%22fa_cn%22%3A%22helena.hb%40example.com%22%7D%2C%7B%22fa_fts%22%3A1248%2C%22fa_fht%22%3A514%2C%22fa_fb%22%3Afalse%2C%22fa_fn%22%3A%22password%22%2C%22fa_fch%22%3A1%2C%22fa_ff%22%3A1%2C%22fa_fd%22%3A0%2C%22fa_fcu%22%3Anull%2C%22fa_ft%22%3A%22text%22%2C%22fa_fs%22%3A5%7D%2C%7B%22fa_fts%22%3A1228%2C%22fa_fht%22%3A480%2C%22fa_fb%22%3Afalse%2C%22fa_fn%22%3A%22confirmPassword%22%2C%22fa_fch%22%3A1%2C%22fa_ff%22%3A1%2C%22fa_fd%22%3A0%2C%22fa_fcu%22%3Anull%2C%22fa_ft%22%3A%22text%22%2C%22fa_fs%22%3A5%7D%5D&fa_ts=21976&ca=1&idsite=137&rec=1&r=44152&h=13&m=45&s=30&date=2022-11-09T13:45:30+3:30&url=mobin-signup-form&_id=3b8a399f706078bc&_uid=jsi6cIVuJINg5gKaysqd&_idn=0&_refts=0&send_image=0&pdf=0&qt=0&realp=0&wma=0&fla=0&java=0&ag=0&cookie=0&res=2148x1080&pv_id=IAl1DZ&fa_tts=28266&fa_ht=3295&fa_st=1&fa_su=1).**


#### Form Metadata

##### fa_vid:
A string of 6 random characters including uppercase, lowercase letters and numbers.
##### fa_id:
It is the name of the form which is defined by the developer programmatically.
```kotlin
override fun getFormName(): String = <YOUR_FORM_NAME>
```
##### fa_name:
It is the name of the form which is defined by the developer programmatically.
```kotlin
override fun getFormName(): String = <YOUR_FORM_NAME>
```
##### fa_ef:
Which form field was interacted with first when starting to interact with this form.
##### fa_lf:
Which form field was last interacted with.
##### fa_fields:
Fields Metadata that has been explained above.
##### fa_ts:
The time in milliseconds the number spent interacting with this form. This is the difference in ms between the last interaction with the form and the first interaction. If the window was not focused for a while then this time is not counted.
##### idSite:
The ID of the website.
##### h:
Hour
##### m: 
Minute
##### s:
Second
##### date:
Date in iso8601 format.
##### url:
It is the name of the form which is defined by the developer programmatically.
##### _id:
DeviceId is a 16-character unique string created with the help of [fingerprintjs](https://github.com/fingerprintjs/fingerprintjs-ios).
##### uid:
The fingerprint is a string created with the help of fingerprintjs-pro, this fingerprint should be set for the information that matomo sends, like pageviews.
#### Res:
Resolution related to the page where this form is placed
##### pv_id:
A string of 6 random characters including uppercase, lowercase letters and numbers
##### fa_tts:
The time in milliseconds it took the user to fill out the form and submit it for the first time. This is excluding the hesitation time and excluding the time when the browser window was not active
##### fa_ht:
The time in milliseconds a visitor waited before interacting with the form.
##### fa_st:
1 if it is the first time the user sees the form, otherwise zero
##### fa_su:
If it has been submitted, it is 1, otherwise it is zero

#### Content Tracking 
When designing a form, the user specifies the fields for which he wants to have content tracking with a special tag equal to IncludeContentTracking.
:warning:**Notice that the field name must be set for all fields.**

### EventActions Requests
Content tracking data is sent through matomo events and actions. For example, when the action related to submitting the form happens The fields data is sent as follows\
fieldName : fieldValue\
![image](https://user-images.githubusercontent.com/69571791/200785257-ae79d74a-8358-478d-8e11-225194fbcea1.png)\
for more details see [here](https://github.com/matomo-org/matomo-sdk-ios#tracking-events)

In the data sent from Matomo also Khown as EventActions and Pageviews, the following points should be noted
- uid: must be equal to the fingerprint
- _id: must be equal to deviceId
- e_a: specifies the name of the action that happened
- e_c: specifies the action category that happened
- e_n: specifies the name of the field and its value in each action
